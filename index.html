<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Linked - ìŠ¤ë§ˆíŠ¸ ì•Œë¦¼ì¥</title>
    <style>
        body {
            font-family: 'Malgun Gothic', sans-serif;
            margin: 0;
            padding: 0;
            background-color: #f4f7f6;
            color: #333;
            line-height: 1.6;
        }
        .container {
            max-width: 420px; /* Typical mobile width */
            margin: 0 auto;
            background-color: #fff;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
        }
        header {
            background-color: #4CAF50;
            color: white;
            padding: 15px 20px;
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
        }
        nav {
            display: flex;
            justify-content: space-around;
            background-color: #e0e0e0;
            padding: 10px 0;
            border-bottom: 1px solid #ddd;
        }
        nav button {
            background: none;
            border: none;
            padding: 10px 15px;
            font-size: 1em;
            cursor: pointer;
            color: #555;
            transition: all 0.3s ease;
            flex-grow: 1;
        }
        nav button.active {
            color: #4CAF50;
            font-weight: bold;
            border-bottom: 2px solid #4CAF50;
        }
        .tab-content {
            padding: 20px;
            flex-grow: 1;
            overflow-y: auto;
        }
        .tab-pane {
            display: none;
        }
        .tab-pane.active {
            display: block;
        }
        h2 {
            color: #4CAF50;
            border-bottom: 2px solid #e0e0e0;
            padding-bottom: 5px;
            margin-top: 20px;
            font-size: 1.3em;
        }
        h3 {
            color: #333;
            font-size: 1.1em;
            margin-top: 15px;
        }
        p, ul {
            margin-bottom: 10px;
        }
        ul {
            list-style-type: none; /* ë¦¬ìŠ¤íŠ¸ ìŠ¤íƒ€ì¼ ì œê±° */
            margin-left: 0;
            padding: 0;
        }
        li {
            margin-bottom: 8px;
            padding: 8px;
            background-color: #f0fdf0; /* ì—°í•œ ë…¹ìƒ‰ ë°°ê²½ */
            border: 1px solid #d0edd0; /* ì—°í•œ ë…¹ìƒ‰ í…Œë‘ë¦¬ */
            border-radius: 5px;
            cursor: pointer; /* í´ë¦­ ê°€ëŠ¥í•œ í‘œì‹œ */
            transition: background-color 0.2s ease;
        }
        li:hover {
            background-color: #e0ffe0; /* í˜¸ë²„ ì‹œ ë” ë°ì€ ë…¹ìƒ‰ */
        }
        input[type="text"], input[type="date"], textarea, select {
            width: calc(100% - 20px);
            padding: 10px;
            margin-bottom: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
        }
        button {
            background-color: #4CAF50;
            color: white;
            padding: 12px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1.1em;
            width: 100%;
            margin-top: 10px;
        }
        button:hover {
            background-color: #45a049;
        }
        .form-group {
            margin-bottom: 15px;
        }
        .event-calendar {
            background-color: #f9f9f9;
            border: 1px solid #eee;
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
        }
        .ai-recommendation {
            background-color: #e6ffe6;
            border: 1px solid #c8e6c9;
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
            font-style: italic;
            color: #388e3c;
        }
        .message-box {
            background-color: #e3f2fd;
            border: 1px solid #bbdefb;
            padding: 15px;
            margin-top: 15px;
            border-radius: 5px;
        }
        .recommended-phrases {
            background-color: #fff3e0;
            border: 1px solid #ffe0b2;
            padding: 10px;
            margin-top: 10px;
            border-radius: 5px;
        }
        .phrase-tag {
            display: inline-block;
            background-color: #ffcc80;
            color: #6d4c41;
            padding: 5px 10px;
            border-radius: 15px;
            margin: 5px 5px 5px 0;
            font-size: 0.9em;
            cursor: pointer;
        }
        .phrase-tag:hover {
            background-color: #ffb74d;
        }
        .notification-item {
            border: 1px solid #eee;
            padding: 10px;
            margin-bottom: 10px;
            border-radius: 5px;
            background-color: #fcfcfc;
        }
        .stats-report {
            background-color: #e8f5e9;
            border: 1px solid #c8e6c9;
            padding: 15px;
            margin-top: 20px;
            border-radius: 5px;
        }
        .data-point {
            margin-bottom: 8px;
        }
        .data-point strong {
            color: #2e7d32;
        }
        /* Sub-menu styles */
        .sub-menu {
            display: none; /* Initially hidden */
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }
        .sub-menu.active {
            display: flex;
        }
        .sub-menu button {
            background-color: #f0f0f0;
            color: #333;
            border: 1px solid #ddd;
            padding: 12px 15px;
            font-size: 1em;
            text-align: left;
            width: 100%;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
            transition: background-color 0.2s ease;
        }
        .sub-menu button:hover {
            background-color: #e6e6e6;
        }
        .section-content {
            display: none;
            margin-top: 20px;
            border-top: 1px dashed #ddd;
            padding-top: 20px;
        }
        .section-content.active {
            display: block;
        }
        .record-list-item {
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            margin-bottom: 8px;
            cursor: pointer;
            background-color: #f8f8f8;
            transition: background-color 0.2s ease;
        }
        .record-list-item:hover {
            background-color: #f0f0f0;
        }
        .record-detail {
            margin-top: 15px;
            padding: 15px;
            border: 1px solid #c0c0c0;
            border-radius: 5px;
            background-color: #e9ecef;
        }
        .record-detail h4 {
            margin-top: 0;
            color: #0056b3;
        }
        .report-section {
            display: none;
            margin-top: 15px;
            padding: 15px;
            border: 1px solid #cfe9cf;
            background-color: #f0fff0;
            border-radius: 5px;
        }
        .report-section.active {
            display: block;
        }
        .report-item {
            margin-bottom: 10px;
            padding-bottom: 5px;
            border-bottom: 1px dotted #e0e0e0;
        }
        .report-item:last-child {
            border-bottom: none;
        }
        .emotion-counts span {
            margin-right: 15px;
            font-weight: bold;
        }
        #complaint-chart {
            display: block; /* canvasëŠ” ê¸°ë³¸ì ìœ¼ë¡œ inlineì´ë¯€ë¡œ blockìœ¼ë¡œ ì„¤ì • */
            margin-top: 15px;
            width: 100%;
            height: 200px; /* ì°¨íŠ¸ ë†’ì´ ê³ ì • */
            background-color: #ffffff;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        /* ìƒˆë¡­ê²Œ ì¶”ê°€ëœ ìŠ¤íƒ€ì¼ */
        .response-list-item {
            padding: 10px;
            border: 1px solid #e0e0e0;
            border-radius: 5px;
            margin-bottom: 8px;
            cursor: pointer;
            background-color: #f8f8f8;
            transition: background-color 0.2s ease;
        }
        .response-list-item:hover {
            background-color: #f0f0f0;
        }
        .response-detail {
            margin-top: 15px;
            padding: 15px;
            border: 1px solid #a8dadc;
            border-radius: 5px;
            background-color: #e0f2f7;
        }
        .response-detail h4 {
            margin-top: 0;
            color: #1d3557;
        }
        .response-detail p {
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            Linked
        </header>
        <nav>
            <button class="tab-button active" data-tab="teacher">êµì‚¬</button>
            <button class="tab-button" data-tab="parent-student">í•™ë¶€ëª¨/í•™ìƒ</button>
            <button class="tab-button" data-tab="school">í•™êµ</button>
        </nav>

        <div class="tab-content">
            <div id="teacher" class="tab-pane active">
                <h2>êµì‚¬ Linked</h2>

                <div id="teacher-login" class="section-content active">
                    <h3>ë¡œê·¸ì¸ ë° ì‹œì‘</h3>
                    <div class="form-group">
                        <label for="teacher-school">í•™êµ:</label>
                        <input type="text" id="teacher-school" placeholder="í•™êµëª… ì…ë ¥">
                    </div>
                    <div class="form-group">
                        <label for="teacher-grade">í•™ë…„:</label>
                        <input type="text" id="teacher-grade" placeholder="í•™ë…„ ì…ë ¥">
                    </div>
                    <div class="form-group">
                        <label for="teacher-class">ë°˜:</label>
                        <input type="text" id="teacher-class" placeholder="ë°˜ ì…ë ¥">
                    </div>
                    <button onclick="handleLogin()">ë¡œê·¸ì¸</button>
                </div>

                <div class="sub-menu" id="teacher-sub-menu">
                    <button onclick="showTeacherSection('notice-creation')">AI ì¶”ì²œ ì•Œë¦¼ì¥ ì‘ì„±</button>
                    <button onclick="showTeacherSection('parent-feedback')">í•™ë¶€ëª¨ í”¼ë“œë°± í™•ì¸</button>
                    <button onclick="showTeacherSection('record-management')">ê¸°ë¡ ê´€ë¦¬</button>
                    <button onclick="showTeacherSection('work-feedback')">ì—…ë¬´ í”¼ë“œë°±</button>
                </div>

                <div id="teacher-notice-creation" class="section-content">
                    <h2>AI ì¶”ì²œ ì•Œë¦¼ì¥ ì‘ì„±</h2>
                    <div class="form-group">
                        <label for="notice-date">ì•Œë¦¼ì¥ ì‘ì„± ë‚ ì§œ:</label>
                        <input type="date" id="notice-date">
                    </div>
                    <div class="event-calendar">
                        <h3>í•™êµ/í•™ë…„ ê³µí†µ í–‰ì‚¬ ë‹¬ë ¥</h3>
                        <ul id="event-list">
                            <li data-event-type="ìš´ë™íšŒ">2025-06-10: í•™êµ ìš´ë™íšŒ</li>
                            <li data-event-type="ì²´í—˜í•™ìŠµ">2025-06-15: í•™ë…„ë³„ ì²´í—˜í•™ìŠµ</li>
                            <li data-event-type="ê³µê°œìˆ˜ì—…">2025-06-20: í•™ë¶€ëª¨ ê³µê°œìˆ˜ì—…</li>
                            <li data-event-type="í˜„ì¥í•™ìŠµ">2025-06-25: êµì™¸ í˜„ì¥í•™ìŠµ</li>
                        </ul>
                        <p>í–‰ì‚¬ë¥¼ í´ë¦­í•˜ë©´ AIê°€ ë¬¸êµ¬ë¥¼ ì¶”ì²œí•˜ê³  ì…ë ¥ë©ë‹ˆë‹¤.</p>
                    </div>
                    <div class="ai-recommendation">
                        <textarea id="ai-recommended-notice" placeholder="AI ì¶”ì²œ ë¬¸êµ¬ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ ë‚´ìš©ì„ ì‘ì„±í•˜ì„¸ìš”." rows="5"></textarea>
                    </div>
                    <button onclick="alert('ì•Œë¦¼ì¥ì´ ì™„ì„±ë˜ì—ˆìŠµë‹ˆë‹¤.')">ì•Œë¦¼ì¥ ì™„ì„±</button>
                    <h3 style="margin-top: 30px;">í•™ë¶€ëª¨ ì „ì†¡</h3>
                    <button onclick="alert('ì™„ì„±ëœ ì•Œë¦¼ì¥ì´ í•™ë¶€ëª¨ë“¤ì—ê²Œ ë°œì†¡ë˜ì—ˆìŠµë‹ˆë‹¤. ë‹¤ë¬¸í™” í•™ë¶€ëª¨ì—ê²ŒëŠ” ìë™ìœ¼ë¡œ ë²ˆì—­ë˜ì–´ ì „ì†¡ë©ë‹ˆë‹¤.')">ì•Œë¦¼ì¥ í•™ë¶€ëª¨ ë°œì†¡</button>
                </div>

                <div id="teacher-parent-feedback" class="section-content">
                    <h2>í•™ë¶€ëª¨ í”¼ë“œë°± í™•ì¸</h2>
                    <div class="notification-item">
                        <h3>[í”¼ë“œë°±] ê³¼ì œ ì œì¶œ ê¸°í•œ ë¬¸ì˜</h3>
                        <p>"ì„ ìƒë‹˜, í˜¹ì‹œ ê³¼ì œ ì œì¶œ ê¸°í•œ ì—°ì¥ ê°€ëŠ¥í• ê¹Œìš”?"</p>
                        <div class="ai-recommendation">
                            AI ë¯¼ì› ìœ í˜•: ê³¼ì œ ê´€ë ¨ ë¬¸ì˜ (ìë™ ë¶„ë¥˜)
                            <br>AI ëŒ€ì‘ ë©˜íŠ¸ ì¶”ì²œ (ì–´ì¡° ì„ íƒ ê°€ëŠ¥):
                            <ul>
                                <li>"ë„¤, ê°€ëŠ¥í•©ë‹ˆë‹¤. ì–¸ì œê¹Œì§€ ì œì¶œ ê°€ëŠ¥í•˜ì‹ ê°€ìš”?" (ì¹œì ˆ)</li>
                                <li>"ì–´ë–¤ ì‚¬ìœ ë¡œ ì—°ì¥ì´ í•„ìš”í•˜ì‹ ì§€ ì•Œë ¤ì£¼ì‹œë©´ ê°ì‚¬í•˜ê² ìŠµë‹ˆë‹¤." (ê³µì†)</li>
                            </ul>
                        </div>
                        <textarea placeholder="AI ì¶”ì²œ ë©˜íŠ¸ë¥¼ ìˆ˜ì •í•˜ê±°ë‚˜ ë‹µë³€ì„ ì‘ì„±í•˜ì„¸ìš”." rows="3"></textarea>
                        <button style="width: auto; padding: 8px 15px; margin-top: 10px;">ë‹µë³€ ì „ì†¡</button>
                    </div>
                    <p style="text-align: center; margin-top: 20px;">* ë” ë§ì€ í”¼ë“œë°±ì´ ìˆìŠµë‹ˆë‹¤.</p>
                </div>

                <div id="teacher-record-management" class="section-content">
                    <h2>ê¸°ë¡ ê´€ë¦¬</h2>
                    <p>ì‘ì„±í•œ ì•Œë¦¼ì¥, ìƒë‹´ ê¸°ë¡, ë¯¼ì› ëŒ€ì‘ ê¸°ë¡ì´ ìë™ ì €ì¥ë©ë‹ˆë‹¤.</p>
                    <button onclick="toggleRecordLists()">ì´ì „ ê¸°ë¡ ê²€ìƒ‰</button>

                    <div id="record-lists" style="display: none;">
                        <h3 style="margin-top: 20px;">ì´ì „ ì•Œë¦¼ì¥ ëª©ë¡</h3>
                        <ul id="past-notice-list">
                            <li class="record-list-item" data-record-type="notice" data-record-id="notice1">2025-05-30: ë°©ê³¼í›„ íŠ¹ë³„í™œë™ ì•ˆë‚´</li>
                            <li class="record-list-item" data-record-type="notice" data-record-id="notice2">2025-05-20: ì²´í—˜ í•™ìŠµ ì¤€ë¹„ë¬¼ ì•ˆë‚´</li>
                            <li class="record-list-item" data-record-type="notice" data-record-id="notice3">2025-05-10: 5ì›” ê°€ì •í†µì‹ ë¬¸</li>
                        </ul>

                        <h3 style="margin-top: 20px;">í•™ë¶€ëª¨ í”¼ë“œë°± ëª©ë¡</h3>
                        <ul id="parent-feedback-list">
                            <li class="record-list-item" data-record-type="feedback" data-record-id="feedback1">2025-05-28: ìˆ™ì œ ê´€ë ¨ ë¬¸ì˜ (í•™ë¶€ëª¨ í™ê¸¸ë™)</li>
                            <li class="record-list-item" data-record-type="feedback" data-record-id="feedback2">2025-05-15: ìƒë‹´ ìš”ì²­ (í•™ë¶€ëª¨ ê¹€ì˜í¬)</li>
                            <li class="record-list-item" data-record-type="feedback" data-record-id="feedback3">2025-05-07: ë“±êµ ì‹œê°„ ë¬¸ì˜ (í•™ë¶€ëª¨ ì´ì² ìˆ˜)</li>
                        </ul>

                        <div id="record-detail-view" class="record-detail" style="display: none;">
                            <h4></h4>
                            <p></p>
                        </div>
                    </div>
                </div>

                <div id="teacher-work-feedback" class="section-content">
                    <h2>ì—…ë¬´ í”¼ë“œë°±</h2>
                    <div class="stats-report">
                        <div class="data-point">"ì´ë²ˆ ì£¼ ì—…ë¬´ ì‹œê°„ì„ **3ì‹œê°„ ì ˆì•½í–ˆìŠµë‹ˆë‹¤!**"</div>
                        <div class="data-point">**ì•Œë¦¼ì¥ ì‘ì„± í†µê³„ ë³´ê³ ì„œ** ì œê³µ</div>
                        <div class="data-point">**ë¯¼ì› ì‘ì„± í†µê³„ ë³´ê³ ì„œ** ì œê³µ</div>
                        <p>ìì„¸í•œ í†µê³„ ë³´ê³ ì„œëŠ” í†µê³„ ë©”ë‰´ì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                    </div>
                </div>
            </div>

            <div id="parent-student" class="tab-pane">
                <h2>í•™ë¶€ëª¨/í•™ìƒ Linked</h2>

                <div class="sub-menu" id="parent-student-sub-menu">
                    <button onclick="showParentStudentSection('notice-reception')">ì•Œë¦¼ì¥ ìˆ˜ì‹ </button>
                    <button onclick="showParentStudentSection('feedback-creation')">ì§ˆë¬¸/í”¼ë“œë°± ì‘ì„±</button>
                    <button onclick="showParentStudentSection('teacher-response')">êµì‚¬ ì‘ë‹µ ìˆ˜ì‹ </button>
                    <button onclick="showParentStudentSection('history-management')">ì•Œë¦¼ì¥ ë° í”¼ë“œë°± ê¸°ë¡ ì €ì¥</button>
                </div>

                <div id="parent-student-notice-reception" class="section-content">
                    <h2>ì•Œë¦¼ì¥ ìˆ˜ì‹ </h2>
                    <div class="notification-item">
                        <h3>[ì•Œë¦¼ì¥] 6ì›” 10ì¼ í•™êµ ìš´ë™íšŒ ì•ˆë‚´</h3>
                        <p>ë‹´ì„êµì‚¬ë¡œë¶€í„° ì•Œë¦¼ì¥(ê³µì§€ì‚¬í•­)ì„ ìˆ˜ì‹ , í•™êµ í–‰ì‚¬, ê³¼ì œ ì œì¶œ ì¼ì •, ì¤€ë¹„ë¬¼ ë“±ì„ í•œëˆˆì— íŒŒì•… ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                        <p>ì•ˆë…•í•˜ì„¸ìš”. 6ì›” 10ì¼(í™”) í•™êµ ìš´ë™íšŒê°€ ìˆìŠµë‹ˆë‹¤. í•™ìƒë“¤ì´ í¸ì•ˆí•˜ê²Œ í™œë™í•  ìˆ˜ ìˆë„ë¡ ê°„í¸í•œ ë³µì¥ê³¼ ê°œì¸ ë¬¼í†µì„ ì§€ì°¸í•˜ë„ë¡ ì§€ë„ ë¶€íƒë“œë¦½ë‹ˆë‹¤.</p>
                        <p>âœ… **ì¤€ë¹„ë¬¼:** ê°„í¸í•œ ë³µì¥, ê°œì¸ ë¬¼í†µ</p>
                        <p>âœ… **ë‚ ì§œ:** 2025ë…„ 6ì›” 10ì¼ (í™”)</p>
                        <p>âœ… **ì‹œê°„:** ì˜¤ì „ 9ì‹œ ~ ì˜¤í›„ 3ì‹œ</p>
                        <p>ë‹¤êµ­ì–´ ë²ˆì—­ ê¸°ëŠ¥: (ë¯¸ë¦¬ ì„¤ì •ëœ ì–¸ì–´ë¡œ ìë™ ë²ˆì—­ëœ ì•Œë¦¼ì¥ í™•ì¸ ê°€ëŠ¥)</p>
                        <button style="width: auto; padding: 8px 15px; margin-top: 10px;" onclick="alert('ì•Œë¦¼ì¥ ë‚´ìš©ì„ í™•ì¸í–ˆìŠµë‹ˆë‹¤.')">í™•ì¸</button>
                    </div>
                </div>

                <div id="parent-student-feedback-creation" class="section-content">
                    <h2>ì§ˆë¬¸/í”¼ë“œë°± ì‘ì„±</h2>
                    <div class="message-box">
                        <p style="font-weight: bold; text-align: center; color: #d32f2f;">
                            â€œì„ ìƒë‹˜ë„ ëˆ„êµ°ê°€ì˜ ì†Œì¤‘í•œ ê°€ì¡±ì…ë‹ˆë‹¤. ë°°ë ¤ì™€ ì¡´ì¤‘ì˜ ì–¸ì–´ë¡œ ì†Œí†µí•  ìˆ˜ ìˆë„ë¡ í•¨ê»˜ ë…¸ë ¥í•´ ì£¼ì„¸ìš”.â€
                        </p>
                        <textarea id="feedback-message" placeholder="ê¶ê¸ˆí•œ ì , ìš”ì²­ ì‚¬í•­ì„ ë©”ì‹œì§€ë¡œ ì‘ì„±í•´ì£¼ì„¸ìš”." rows="5"></textarea>
                        <div class="recommended-phrases">
                            <p>ì¶”ì²œ í‚¤ì›Œë“œ/í‘œí˜„:</p>
                            <span class="phrase-tag" onclick="addPhrase('ì£„ì†¡í•˜ì§€ë§Œ ë¬¸ì˜ë“œë ¤ë„ ë ê¹Œìš”?')">ì£„ì†¡í•˜ì§€ë§Œ ë¬¸ì˜ë“œë ¤ë„ ë ê¹Œìš”?</span>
                            <span class="phrase-tag" onclick="addPhrase('ì‹œê°„ ë‚´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.')">ì‹œê°„ ë‚´ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤.</span>
                            <span class="phrase-tag" onclick="addPhrase('ì„ ìƒë‹˜ì˜ ë‹µë³€ ê¸°ë‹¤ë¦¬ê² ìŠµë‹ˆë‹¤.')">ì„ ìƒë‹˜ì˜ ë‹µë³€ ê¸°ë‹¤ë¦¬ê² ìŠµë‹ˆë‹¤.</span>
                            <span class="phrase-tag" onclick="addPhrase('ê³¼ì œ ì œì¶œ ê¸°í•œ ì—°ì¥ ê°€ëŠ¥í• ê¹Œìš”?')">ê³¼ì œ ì œì¶œ ê¸°í•œ ì—°ì¥ ê°€ëŠ¥í• ê¹Œìš”?</span>
                            <span class="phrase-tag" onclick="addPhrase('ì§„ë¡œ ìƒë‹´ ì‹ ì²­í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.')">ì§„ë¡œ ìƒë‹´ ì‹ ì²­í•˜ê³  ì‹¶ìŠµë‹ˆë‹¤.</span>
                            <span class="phrase-tag" onclick="addPhrase('êµë‚´ ëŒ€íšŒ ì°¸ê°€ ì‹ ì²­ ë°©ë²• ì•Œë ¤ì£¼ì„¸ìš”!')">êµë‚´ ëŒ€íšŒ ì°¸ê°€ ì‹ ì²­ ë°©ë²• ì•Œë ¤ì£¼ì„¸ìš”!</span>
                            <span class="phrase-tag" onclick="addPhrase('êµë‚´ ë´‰ì‚¬í™œë™ ê´€ë ¨ ë¬¸ì˜ë“œë ¤ìš”.')">êµë‚´ ë´‰ì‚¬í™œë™ ê´€ë ¨ ë¬¸ì˜ë“œë ¤ìš”.</span>
                        </div>
                        <button onclick="alert('ë©”ì‹œì§€ê°€ ì„ ìƒë‹˜ê»˜ ì „ì†¡ë˜ì—ˆìŠµë‹ˆë‹¤.')">ë©”ì‹œì§€ ì „ì†¡</button>
                    </div>
                </div>

                <div id="parent-student-teacher-response" class="section-content">
                    <h2>êµì‚¬ì˜ ì‘ë‹µ ìˆ˜ì‹ </h2>
                    <p>êµì‚¬ê°€ ì‘ì„±í•œ ë‹µë³€ ëª©ë¡ì…ë‹ˆë‹¤. í´ë¦­í•˜ì—¬ ìƒì„¸ ë‚´ìš©ì„ í™•ì¸í•˜ì„¸ìš”.</p>
                    <ul id="teacher-response-list">
                        <li class="response-list-item" data-response-id="res1">2025-06-05 10:30: ê³¼ì œ ì œì¶œ ê¸°í•œ ì—°ì¥ ì•ˆë‚´</li>
                        <li class="response-list-item" data-response-id="res2">2025-06-04 15:00: ìƒë‹´ ìš”ì²­ì— ëŒ€í•œ íšŒì‹ </li>
                        <li class="response-list-item" data-response-id="res3">2025-06-03 09:15: í•™êµ í–‰ì‚¬ ì¤€ë¹„ë¬¼ ë‹µë³€</li>
                    </ul>

                    <div id="response-detail-view" class="response-detail" style="display: none;">
                        <h4></h4>
                        <p class="response-time"></p>
                        <p class="response-content"></p>
                    </div>
                </div>

                <div id="parent-student-history-management" class="section-content">
                    <h2>ì•Œë¦¼ì¥ ë° í”¼ë“œë°± ê¸°ë¡ ì €ì¥</h2>
                    <p>Linkedë¥¼ í†µí•´ ê³¼ê±°ì˜ ì•Œë¦¼ì¥ ë° ë¬¸ì˜/ë‹µë³€ ë‚´ìš©ì„ ì‰½ê²Œ ë‹¤ì‹œ í™•ì¸í•˜ì—¬ í•™êµ ìƒí™œ íˆìŠ¤í† ë¦¬ë¥¼ í•œëˆˆì— ê´€ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</p>
                    <button onclick="alert('ê³¼ê±° ì•Œë¦¼ì¥ ë° ë¬¸ì˜/ë‹µë³€ ê¸°ë¡ì„ í™•ì¸í•©ë‹ˆë‹¤.')">ë‚´ í•™êµ ìƒí™œ íˆìŠ¤í† ë¦¬ í™•ì¸</button>
                </div>

            </div>

            <div id="school" class="tab-pane">
                <h2>í•™êµ Linked</h2>

                <div class="sub-menu" id="school-sub-menu">
                    <button onclick="showSchoolSection('schedule-registration')">í•™êµ ì¼ì • ë“±ë¡</button>
                    <button onclick="showSchoolSection('notice-auto-distribution')">ì•Œë¦¼ì¥ ìë™ ë°°í¬</button>
                    <button onclick="showSchoolSection('material-management')">êµë‚´ ê³µí†µ ìë£Œ ê´€ë¦¬</button>
                    <button onclick="showSchoolSection('data-statistics')">í•™êµ ìš´ì˜ ë°ì´í„° í†µê³„</button>
                </div>

                <div id="school-schedule-registration" class="section-content">
                    <h3>í•™êµ ì¼ì • ë“±ë¡</h3>
                    <div class="form-group">
                        <label for="school-schedule-title">ì¼ì • ì œëª©:</label>
                        <input type="text" id="school-schedule-title" placeholder="ì˜ˆ: í•™ì‚¬ ì¼ì •, í–‰ì‚¬ ì¼ì •">
                    </div>
                    <div class="form-group">
                        <label for="school-schedule-date">ì¼ì • ë‚ ì§œ:</label>
                        <input type="date" id="school-schedule-date">
                    </div>
                    <div class="form-group">
                        <label for="school-schedule-content">ë‚´ìš©:</label>
                        <textarea id="school-schedule-content" placeholder="ìƒì„¸ ë‚´ìš© ì…ë ¥ (ê³µë¬¸ ë‚´ìš© ë“±)"></textarea>
                    </div>
                    <div class="form-group">
                        <label for="share-permission">ê³µìœ  ê¶Œí•œ ì„¤ì •:</label>
                        <select id="share-permission">
                            <option value="all">ì „ì²´ ê³µê°œ</option>
                            <option value="grade1">1í•™ë…„ë§Œ ê³µê°œ</option>
                            <option value="grade2">2í•™ë…„ë§Œ ê³µê°œ</option>
                            <option value="specific">íŠ¹ì • ë¶€ì„œë§Œ ê³µê°œ</option>
                        </select>
                    </div>
                    <button onclick="alert('í•™êµ ì¼ì •ì´ ë“±ë¡ë˜ê³  ìë™ìœ¼ë¡œ êµì‚¬ ì•Œë¦¼ì¥ì— ë°˜ì˜ë©ë‹ˆë‹¤.')">ì¼ì • ë“±ë¡</button>
                </div>

                <div id="school-notice-auto-distribution" class="section-content">
                    <h2>ì•Œë¦¼ì¥ ìë™ ë°°í¬</h2>
                    <p>ë“±ë¡ëœ í•™êµ ì¼ì •ì€ Linked ì‹œìŠ¤í…œì„ í†µí•´ ê° êµì‚¬ì˜ ì•Œë¦¼ì¥ì— ìë™ ì¶”ì²œìœ¼ë¡œ ë°˜ì˜ë˜ì–´ ì¤‘ë³µ ì…ë ¥ ë°©ì§€ ë° êµì‚¬ì˜ ì‘ì„± ë¶€ë‹´ì„ ê°ì†Œì‹œí‚µë‹ˆë‹¤.</p>
                    <p>ì¼ì • ë³€ê²½ ì‹œ ìë™ ì•Œë¦¼ ê¸°ëŠ¥: êµì‚¬ ì•Œë¦¼ì¥ì— ì¦‰ì‹œ ì—…ë°ì´íŠ¸ë©ë‹ˆë‹¤.</p>
                </div>

                <div id="school-material-management" class="section-content">
                    <h2>êµë‚´ ê³µí†µ ìë£Œ ê´€ë¦¬</h2>
                    <div class="form-group">
                        <label for="common-material-upload">ìë£Œ ì—…ë¡œë“œ:</label>
                        <input type="file" id="common-material-upload">
                    </div>
                    <button onclick="alert('ìë£Œê°€ í•™êµ ì „ì²´ ê³µìœ  í´ë”ì— ì—…ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.')">ìë£Œ ì—…ë¡œë“œ</button>
                    <p>í•™êµ ë‚´ ê³µí†µ ìë£Œ(ì˜ˆ: ê°€ì •í†µì‹ ë¬¸, ê³µë¬¸, í–‰ì‚¬ ê³„íšì„œ ë“±)ë¥¼ ê° ë¶€ì„œì—ì„œ ë‹´ë‹¹ìê°€ ì—…ë¡œë“œí•˜ë©´ ì—…ë¡œë“œëœ ìë£ŒëŠ” í•™êµ ì „ì²´ ê³µìœ  í´ë”ì—ì„œ í™•ì¸ ê°€ëŠ¥í•©ë‹ˆë‹¤.</p>
                    <p>êµì‚¬ë³„ ì ‘ê·¼ ê¶Œí•œ ì„¤ì • ë° ê²€ìƒ‰ ê¸°ëŠ¥ ì§€ì›, ìë£Œ ì—…ë°ì´íŠ¸ ì‹œ ë²„ì „ ê´€ë¦¬ ë° ì•Œë¦¼ì´ ì œê³µë©ë‹ˆë‹¤.</p>
                </div>

                <div id="school-data-statistics" class="section-content">
                    <h2>í•™êµ ìš´ì˜ ë°ì´í„° í†µê³„</h2>
                    <div class="stats-report">
                        <button onclick="showEmotionReport()">"êµì‚¬ ê°ì •ë…¸ë™ ì§€ìˆ˜" ë¦¬í¬íŠ¸</button>
                        <div id="emotion-report-details" class="report-section">
                            <h3>ìµœê·¼ ì¼ì£¼ì¼ ê°ì • ì§€ìˆ˜</h3>
                            <div id="emotion-data">
                                </div>
                        </div>

                        <button onclick="showComplaintReport()">"ë¯¼ì› ìœ í˜•ë³„ ëŒ€ì‘ í†µê³„" ë¦¬í¬íŠ¸</button>
                        <div id="complaint-report-details" class="report-section">
                            <h3>ë¯¼ì› ìœ í˜•ë³„ í†µê³„</h3>
                            <canvas id="complaint-chart"></canvas>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let isLoggedIn = false; // ë¡œê·¸ì¸ ìƒíƒœë¥¼ ì¶”ì í•˜ëŠ” ë³€ìˆ˜

        // AI ì¶”ì²œ ë¬¸êµ¬ ë°ì´í„° (ì‹¤ì œ ì„œë¹„ìŠ¤ì—ì„œëŠ” ì„œë²„ì—ì„œ ê°€ì ¸ì˜´)
        const aiRecommendations = {
            "ìš´ë™íšŒ": "ë‹¤ìŒ ì£¼ í™”ìš”ì¼(6ì›” 10ì¼)ì—ëŠ” í•™êµ ìš´ë™íšŒê°€ ìˆìŠµë‹ˆë‹¤. í•™ìƒë“¤ì´ í¸ì•ˆí•˜ê²Œ í™œë™í•  ìˆ˜ ìˆë„ë¡ ê°„í¸í•œ ë³µì¥ê³¼ ê°œì¸ ë¬¼í†µì„ ì§€ì°¸í•˜ë„ë¡ ì§€ë„ ë¶€íƒë“œë¦½ë‹ˆë‹¤.",
            "ì²´í—˜í•™ìŠµ": "6ì›” 15ì¼(í† )ì—ëŠ” í•™ë…„ë³„ ì²´í—˜í•™ìŠµì´ ì˜ˆì •ë˜ì–´ ìˆìŠµë‹ˆë‹¤. ìì„¸í•œ ì¤€ë¹„ë¬¼ê³¼ ì§‘ê²° ì‹œê°„ì€ ì¶”í›„ ì•ˆë‚´ë  ê°€ì •í†µì‹ ë¬¸ì„ í™•ì¸í•´ì£¼ì„¸ìš”.",
            "ê³µê°œìˆ˜ì—…": "6ì›” 20ì¼(ëª©)ì—ëŠ” í•™ë¶€ëª¨ ê³µê°œìˆ˜ì—…ì´ ì§„í–‰ë©ë‹ˆë‹¤. ìë…€ì˜ í•™ìŠµ í™œë™ì„ ì°¸ê´€í•˜ì‹œê³ , ìˆ˜ì—… í›„ì—ëŠ” ë‹´ì„êµì‚¬ì™€ì˜ ìƒë‹´ ì‹œê°„ë„ ë§ˆë ¨ë˜ì–´ ìˆìœ¼ë‹ˆ ë§ì€ ì°¸ì—¬ ë¶€íƒë“œë¦½ë‹ˆë‹¤.",
            "í˜„ì¥í•™ìŠµ": "6ì›” 25ì¼(ìˆ˜) êµì™¸ í˜„ì¥í•™ìŠµì„ ì‹¤ì‹œí•©ë‹ˆë‹¤. ì•ˆì „í•˜ê³  ì¦ê±°ìš´ í™œë™ì„ ìœ„í•´ ê°œì¸ ë¬¼í’ˆ(ê°„ì‹, ìŒë£Œ, ìš°ë¹„ ë“±)ì„ ì˜ ì±™ê²¨ì£¼ì„¸ìš”. ë‹¹ì¼ í•™ìƒë“¤ì€ í˜„ì¥í•™ìŠµë³µì„ ì°©ìš©í•©ë‹ˆë‹¤."
        };

        // ê°€ìƒì˜ ì´ì „ ê¸°ë¡ ë°ì´í„° (êµì‚¬ìš©)
        const pastRecords = {
            notices: {
                notice1: {
                    title: "2025-05-30: ë°©ê³¼í›„ íŠ¹ë³„í™œë™ ì•ˆë‚´",
                    content: "ì•ˆë…•í•˜ì„¸ìš”. 5ì›” 30ì¼(ê¸ˆ)ë¶€í„° ë°©ê³¼í›„ íŠ¹ë³„í™œë™ ì‹ ì²­ ê¸°ê°„ì´ ì‹œì‘ë©ë‹ˆë‹¤. í¬ë§í•˜ëŠ” í•™ìƒë“¤ì€ ì‹ ì²­ì„œë¥¼ ì‘ì„±í•˜ì—¬ ì œì¶œí•´ ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤. ìì„¸í•œ ë‚´ìš©ì€ ì²¨ë¶€ íŒŒì¼ì„ í™•ì¸í•´ì£¼ì„¸ìš”."
                },
                notice2: {
                    title: "2025-05-20: ì²´í—˜ í•™ìŠµ ì¤€ë¹„ë¬¼ ì•ˆë‚´",
                    content: "ë‹¤ìŒ ì£¼ í™”ìš”ì¼(5ì›” 27ì¼)ì— ì§„í–‰ë  ì²´í—˜ í•™ìŠµ ì¤€ë¹„ë¬¼ ì•ˆë‚´ì…ë‹ˆë‹¤. ê°œì¸ ë„ì‹œë½, ê°„ì‹, ë¬¼í†µ, í¸í•œ ìš´ë™í™” ë“±ì„ ì¤€ë¹„í•´ ì£¼ì‹œê³ , ë¹„ìƒì•½ì´ í•„ìš”í•œ í•™ìƒì€ ë¯¸ë¦¬ ë‹´ì„ ì„ ìƒë‹˜ê»˜ ì•Œë ¤ì£¼ì„¸ìš”."
                },
                notice3: {
                    title: "2025-05-10: 5ì›” ê°€ì •í†µì‹ ë¬¸",
                    content: "5ì›” ê°€ì •í†µì‹ ë¬¸ì…ë‹ˆë‹¤. ì´ë²ˆ ë‹¬ì—ëŠ” í•™ë¶€ëª¨ ê³µê°œìˆ˜ì—…, í˜„ì¥ ì²´í—˜í•™ìŠµ ë“± ë‹¤ì–‘í•œ í•™êµ í–‰ì‚¬ê°€ ì˜ˆì •ë˜ì–´ ìˆìœ¼ë‹ˆ, ë‚´ìš©ì„ ê¼¼ê¼¼íˆ í™•ì¸í•˜ì‹œì–´ ì°¸ì—¬ ë¶€íƒë“œë¦½ë‹ˆë‹¤."
                }
            },
            feedbacks: {
                feedback1: {
                    title: "2025-05-28: ìˆ™ì œ ê´€ë ¨ ë¬¸ì˜ (í•™ë¶€ëª¨ í™ê¸¸ë™)",
                    content: "ì„ ìƒë‹˜, ì•ˆë…•í•˜ì„¸ìš”. ë‹¤ë¦„ì´ ì•„ë‹ˆë¼ ì €í¬ ì•„ì´ê°€ ì–´ì œ ëª¸ì´ ì¢‹ì§€ ì•Šì•„ ìˆ™ì œë¥¼ ë‹¤ í•˜ì§€ ëª»í–ˆëŠ”ë°, ì œì¶œ ê¸°í•œ ì—°ì¥ì´ ê°€ëŠ¥í• ì§€ ë¬¸ì˜ë“œë¦½ë‹ˆë‹¤. í˜¹ì‹œ ì´ë²ˆ ì£¼ë§ê¹Œì§€ëŠ” ì œì¶œí•  ìˆ˜ ìˆì„ ê²ƒ ê°™ìŠµë‹ˆë‹¤."
                },
                feedback2: {
                    title: "2025-05-15: ìƒë‹´ ìš”ì²­ (í•™ë¶€ëª¨ ê¹€ì˜í¬)",
                    content: "ì„ ìƒë‹˜, ì•ˆë…•í•˜ì„¸ìš”. ê¹€ì˜í¬ í•™ìƒ í•™ë¶€ëª¨ì…ë‹ˆë‹¤. ì•„ì´ì˜ ìµœê·¼ í•™ìŠµ íƒœë„ì— ëŒ€í•´ ìƒë‹´ì„ ìš”ì²­ë“œë¦¬ê³  ì‹¶ìŠµë‹ˆë‹¤. í˜¹ì‹œ ë‹¤ìŒ ì£¼ ì¤‘ìœ¼ë¡œ ì‹œê°„ ê´œì°®ìœ¼ì‹  ë•Œê°€ ìˆì„ê¹Œìš”?"
                },
                feedback3: {
                    title: "2025-05-07: ë“±êµ ì‹œê°„ ë¬¸ì˜ (í•™ë¶€ëª¨ ì´ì² ìˆ˜)",
                    content: "ì„ ìƒë‹˜, ì•ˆë…•í•˜ì„¸ìš”. ì´ì² ìˆ˜ í•™ìƒ í•™ë¶€ëª¨ì…ë‹ˆë‹¤. ë‹¤ë¦„ì´ ì•„ë‹ˆë¼ ì•„ì´ê°€ ì•„ì¹¨ì— ë“±êµí•˜ëŠ” ì‹œê°„ì´ ë„ˆë¬´ ëŠ¦ì–´ì ¸ì„œ ê±±ì •ì…ë‹ˆë‹¤. í˜¹ì‹œ ë“±êµ ì‹œê°„ ì¡°ì •ì´ë‚˜ ì§€ë„ ë°©ë²• ê´€ë ¨í•´ì„œ ì¡°ì–¸ì„ ì–»ì„ ìˆ˜ ìˆì„ê¹Œìš”?"
                }
            }
        };

        // ê°€ìƒì˜ ê°ì • ë°ì´í„° (ìµœê·¼ ì¼ì£¼ì¼)
        const emotionData = [
            { date: "2025-05-29", happy: 15, sad: 2 },
            { date: "2025-05-30", happy: 18, sad: 1 },
            { date: "2025-05-31", happy: 12, sad: 3 },
            { date: "2025-06-01", happy: 10, sad: 0 }, /* ì£¼ë§ */
            { date: "2025-06-02", happy: 8, sad: 0 },  /* ì£¼ë§ */
            { date: "2025-06-03", happy: 16, sad: 2 },
            { date: "2025-06-04", happy: 14, sad: 1 }
        ];

        // ê°€ìƒì˜ ë¯¼ì› ìœ í˜• ë°ì´í„°
        const complaintTypeData = {
            "ë‹¨ìˆœ ì§ˆë¬¸": 40,
            "í–‰ì • ì—…ë¬´": 25,
            "í•™ì‚¬ ê´€ë ¨": 20,
            "ìƒë‹´": 10,
            "ì•…ì„± ë¯¼ì›": 5
        };

        // ê°€ìƒì˜ êµì‚¬ ì‘ë‹µ ë°ì´í„° (í•™ë¶€ëª¨/í•™ìƒìš©)
        const teacherResponses = {
            res1: {
                title: "ê³¼ì œ ì œì¶œ ê¸°í•œ ì—°ì¥ ì•ˆë‚´",
                time: "2025-06-05 10:30",
                content: "ì•ˆë…•í•˜ì„¸ìš”. ê³¼ì œ ì œì¶œ ê¸°í•œì€ ë‹¤ìŒ ì£¼ ê¸ˆìš”ì¼(6ì›” 13ì¼)ê¹Œì§€ ì—°ì¥ ê°€ëŠ¥í•©ë‹ˆë‹¤. í˜¹ì‹œ ê·¸ ì „ì— ì œì¶œì´ ì–´ë ¤ìš°ì‹œë©´ ë‹¤ì‹œ ì•Œë ¤ì£¼ì„¸ìš”."
            },
            res2: {
                title: "ìƒë‹´ ìš”ì²­ì— ëŒ€í•œ íšŒì‹ ",
                time: "2025-06-04 15:00",
                content: "ì•ˆë…•í•˜ì„¸ìš”. ìƒë‹´ ìš”ì²­ ì£¼ì…”ì„œ ê°ì‚¬í•©ë‹ˆë‹¤. ë‹¤ìŒ ì£¼ í™”ìš”ì¼ ì˜¤í›„ 4ì‹œ ë˜ëŠ” ëª©ìš”ì¼ ì˜¤í›„ 3ì‹œê°€ ê°€ëŠ¥í•©ë‹ˆë‹¤. í¸í•˜ì‹  ì‹œê°„ì„ ì•Œë ¤ì£¼ì‹œë©´ ì¡°ìœ¨í•´ë“œë¦¬ê² ìŠµë‹ˆë‹¤."
            },
            res3: {
                title: "í•™êµ í–‰ì‚¬ ì¤€ë¹„ë¬¼ ë‹µë³€",
                time: "2025-06-03 09:15",
                content: "ë¬¸ì˜í•˜ì‹  í•™êµ í–‰ì‚¬ ì¤€ë¹„ë¬¼ì€ ê°„í¸í•œ ë³µì¥ê³¼ ê°œì¸ ë¬¼í†µì…ë‹ˆë‹¤. ìš°ì²œ ì‹œì—ëŠ” ìš°ì‚°ì„ ì§€ì°¸í•´ì£¼ì‹œê¸° ë°”ëë‹ˆë‹¤."
            }
        };


        document.addEventListener('DOMContentLoaded', () => {
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabPanes = document.querySelectorAll('.tab-pane');
            const eventList = document.getElementById('event-list');
            const aiRecommendedNotice = document.getElementById('ai-recommended-notice');
            const recordListsContainer = document.getElementById('record-lists');
            const pastNoticeList = document.getElementById('past-notice-list');
            const parentFeedbackList = document.getElementById('parent-feedback-list');
            const recordDetailView = document.getElementById('record-detail-view');
            const recordDetailTitle = recordDetailView.querySelector('h4');
            const recordDetailContent = recordDetailView.querySelector('p');
            const emotionReportDetails = document.getElementById('emotion-report-details');
            const emotionDataDisplay = document.getElementById('emotion-data');
            const complaintReportDetails = document.getElementById('complaint-report-details');
            const complaintChartCanvas = document.getElementById('complaint-chart');

            // í•™ë¶€ëª¨/í•™ìƒìš© ìš”ì†Œë“¤
            const teacherResponseList = document.getElementById('teacher-response-list');
            const responseDetailView = document.getElementById('response-detail-view');
            const responseDetailTitle = responseDetailView.querySelector('h4');
            const responseDetailTime = responseDetailView.querySelector('.response-time');
            const responseDetailContent = responseDetailView.querySelector('.response-content');


            // ì´ˆê¸° ë¡œë“œ ì‹œ 'êµì‚¬' íƒ­ì´ í™œì„±í™”ë˜ì–´ ìˆë„ë¡ ì„¤ì •
            document.querySelector('.tab-button[data-tab="teacher"]').classList.add('active');
            document.getElementById('teacher').classList.add('active');
            document.getElementById('teacher-login').classList.add('active'); // êµì‚¬ íƒ­ì˜ ë¡œê·¸ì¸ í™”ë©´ì„ ê¸°ë³¸ìœ¼ë¡œ í™œì„±í™”
            
            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.dataset.tab;

                    tabButtons.forEach(btn => btn.classList.remove('active'));
                    button.classList.add('active');

                    tabPanes.forEach(pane => {
                        if (pane.id === targetTab) {
                            pane.classList.add('active');
                            if (targetTab === 'teacher') {
                                if (isLoggedIn) {
                                    document.getElementById('teacher-login').classList.remove('active');
                                    document.getElementById('teacher-sub-menu').classList.add('active');
                                    showTeacherSection('notice-creation');
                                } else {
                                    document.getElementById('teacher-login').classList.add('active');
                                    document.getElementById('teacher-sub-menu').classList.remove('active');
                                    hideAllTeacherSectionsExcept('login');
                                }
                                // ë‹¤ë¥¸ íƒ­ì˜ ì„œë¸Œ ë©”ë‰´ ë° ì„¹ì…˜ ìˆ¨ê¸°ê¸°
                                document.getElementById('parent-student-sub-menu').classList.remove('active');
                                hideAllParentStudentSectionsExcept(null);
                                document.getElementById('school-sub-menu').classList.remove('active');
                                hideAllSchoolSectionsExcept(null);
                                hideAllSchoolReportSections(); // í•™êµ í†µê³„ ë¦¬í¬íŠ¸ ìˆ¨ê¹€

                            } else if (targetTab === 'parent-student') {
                                document.getElementById('parent-student-sub-menu').classList.add('active');
                                showParentStudentSection('notice-reception'); // 'ì•Œë¦¼ì¥ ìˆ˜ì‹ 'ì„ ê¸°ë³¸ìœ¼ë¡œ í™œì„±í™”
                                // ë‹¤ë¥¸ íƒ­ì˜ ì„œë¸Œ ë©”ë‰´ ë° ì„¹ì…˜ ìˆ¨ê¸°ê¸°
                                document.getElementById('teacher-login').classList.remove('active');
                                document.getElementById('teacher-sub-menu').classList.remove('active');
                                hideAllTeacherSectionsExcept(null);
                                document.getElementById('school-sub-menu').classList.remove('active');
                                hideAllSchoolSectionsExcept(null);
                                hideAllSchoolReportSections(); // í•™êµ í†µê³„ ë¦¬í¬íŠ¸ ìˆ¨ê¹€

                            } else if (targetTab === 'school') {
                                document.getElementById('school-sub-menu').classList.add('active');
                                showSchoolSection('schedule-registration'); // 'í•™êµ ì¼ì • ë“±ë¡'ì„ ê¸°ë³¸ìœ¼ë¡œ í™œì„±í™”
                                // ë‹¤ë¥¸ íƒ­ì˜ ì„œë¸Œ ë©”ë‰´ ë° ì„¹ì…˜ ìˆ¨ê¸°ê¸°
                                document.getElementById('teacher-login').classList.remove('active');
                                document.getElementById('teacher-sub-menu').classList.remove('active');
                                hideAllTeacherSectionsExcept(null);
                                document.getElementById('parent-student-sub-menu').classList.remove('active');
                                hideAllParentStudentSectionsExcept(null);
                                hideAllSchoolReportSections(); // íƒ­ ë³€ê²½ ì‹œ í•™êµ í†µê³„ ë¦¬í¬íŠ¸ ìˆ¨ê¹€
                            }
                        } else {
                            pane.classList.remove('active');
                        }
                    });
                });
            });

            // ì´ë²¤íŠ¸ ë¦¬ìŠ¤íŠ¸ í´ë¦­ í•¸ë“¤ëŸ¬
            if (eventList) {
                eventList.addEventListener('click', (event) => {
                    if (event.target.tagName === 'LI') {
                        const eventType = event.target.dataset.eventType;
                        const recommendedText = aiRecommendations[eventType];
                        if (recommendedText) {
                            aiRecommendedNotice.value = recommendedText;
                        }
                    }
                });
            }

            // ì´ì „ ê¸°ë¡ ëª©ë¡ í´ë¦­ í•¸ë“¤ëŸ¬ (êµì‚¬ìš©)
            const allRecordLists = document.querySelectorAll('#past-notice-list, #parent-feedback-list');
            allRecordLists.forEach(list => {
                list.addEventListener('click', (event) => {
                    if (event.target.classList.contains('record-list-item')) {
                        const recordType = event.target.dataset.recordType;
                        const recordId = event.target.dataset.recordId;
                        let record;

                        if (recordType === 'notice') {
                            record = pastRecords.notices[recordId];
                        } else if (recordType === 'feedback') {
                            record = pastRecords.feedbacks[recordId];
                        }

                        if (record) {
                            recordDetailTitle.textContent = record.title;
                            recordDetailContent.textContent = record.content;
                            recordDetailView.style.display = 'block';
                        }
                    }
                });
            });

            // êµì‚¬ ì‘ë‹µ ëª©ë¡ í´ë¦­ í•¸ë“¤ëŸ¬ (í•™ë¶€ëª¨/í•™ìƒìš©)
            if (teacherResponseList) {
                teacherResponseList.addEventListener('click', (event) => {
                    if (event.target.classList.contains('response-list-item')) {
                        const responseId = event.target.dataset.responseId;
                        const response = teacherResponses[responseId];

                        if (response) {
                            responseDetailTitle.textContent = response.title;
                            responseDetailTime.textContent = `ì‘ë‹µ ì‹œê°„: ${response.time}`;
                            responseDetailContent.textContent = response.content;
                            responseDetailView.style.display = 'block';
                        }
                    }
                });
            }

            // ì´ˆê¸°í™” ì‹œ ë¯¼ì› ì°¨íŠ¸ ê·¸ë¦¬ê¸° (ìˆ¨ê²¨ì§„ ìƒíƒœì—ì„œë„ í•œë²ˆ ê·¸ë ¤ì„œ í¬ê¸° ì¡°ì ˆ ë¬¸ì œ ë°©ì§€)
            drawComplaintChart();
        });

        function handleLogin() {
            isLoggedIn = true;
            alert('ë¡œê·¸ì¸ë˜ì—ˆìŠµë‹ˆë‹¤. Linked ì£¼ìš” ê¸°ëŠ¥ì„ ì´ìš©í•˜ì‹¤ ìˆ˜ ìˆìŠµë‹ˆë‹¤.');
            document.getElementById('teacher-login').classList.remove('active');
            document.getElementById('teacher-sub-menu').classList.add('active');
            showTeacherSection('notice-creation');
        }

        function showTeacherSection(sectionId) {
            const sections = document.querySelectorAll('#teacher .section-content');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('teacher-' + sectionId).classList.add('active');
            // ê¸°ë¡ ê´€ë¦¬ ì„¹ì…˜ì´ ì•„ë‹Œ ê²½ìš° ê¸°ë¡ ëª©ë¡ ìˆ¨ê¸°ê¸°
            if (sectionId !== 'record-management') {
                document.getElementById('record-lists').style.display = 'none';
                document.getElementById('record-detail-view').style.display = 'none';
            }
        }

        function hideAllTeacherSectionsExcept(activeSectionId) {
            const sections = document.querySelectorAll('#teacher .section-content');
            sections.forEach(section => {
                if (section.id !== 'teacher-' + activeSectionId) {
                    section.classList.remove('active');
                }
            });
            // ë¡œê·¸ì¸ í™”ë©´ì¼ ê²½ìš° ê¸°ë¡ ëª©ë¡ ìˆ¨ê¹€
            if (activeSectionId === 'login') {
                document.getElementById('record-lists').style.display = 'none';
                document.getElementById('record-detail-view').style.display = 'none';
            }
        }

        function showParentStudentSection(sectionId) {
            const sections = document.querySelectorAll('#parent-student .section-content');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('parent-student-' + sectionId).classList.add('active');
            // êµì‚¬ ì‘ë‹µ ìˆ˜ì‹  ì„¹ì…˜ì´ ì•„ë‹Œ ê²½ìš° ìƒì„¸ ë³´ê¸° ìˆ¨ê¸°ê¸°
            if (sectionId !== 'teacher-response') {
                document.getElementById('response-detail-view').style.display = 'none';
            }
        }

        function hideAllParentStudentSectionsExcept(activeSectionId) {
            const sections = document.querySelectorAll('#parent-student .section-content');
            sections.forEach(section => {
                if (section.id !== 'parent-student-' + activeSectionId) {
                    section.classList.remove('active');
                }
            });
            // íŠ¹ì • ì„¹ì…˜ì´ ì•„ë‹ ê²½ìš° ìƒì„¸ ë³´ê¸° ìˆ¨ê¹€
            if (activeSectionId !== 'teacher-response') {
                document.getElementById('response-detail-view').style.display = 'none';
            }
        }

        function showSchoolSection(sectionId) {
            const sections = document.querySelectorAll('#school .section-content');
            sections.forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById('school-' + sectionId).classList.add('active');
            hideAllSchoolReportSections(); // ì„¹ì…˜ ë³€ê²½ ì‹œ ëª¨ë“  ë¦¬í¬íŠ¸ ìˆ¨ê¹€
        }

        function hideAllSchoolSectionsExcept(activeSectionId) {
            const sections = document.querySelectorAll('#school .section-content');
            sections.forEach(section => {
                if (section.id !== 'school-' + activeSectionId) {
                    section.classList.remove('active');
                }
            });
            hideAllSchoolReportSections(); // ë‹¤ë¥¸ ì„¹ì…˜ ì„ íƒ ì‹œ ë¦¬í¬íŠ¸ ìˆ¨ê¹€
        }

        function addPhrase(phrase) {
            const textarea = document.getElementById('feedback-message');
            textarea.value += phrase + ' ';
            textarea.focus();
        }

        function toggleRecordLists() {
            const recordLists = document.getElementById('record-lists');
            const recordDetailView = document.getElementById('record-detail-view');
            if (recordLists.style.display === 'none') {
                recordLists.style.display = 'block';
            } else {
                recordLists.style.display = 'none';
                recordDetailView.style.display = 'none'; // ëª©ë¡ ìˆ¨ê¸¸ ë•Œ ìƒì„¸ ë³´ê¸°ë„ ìˆ¨ê¹€
            }
        }

        function hideAllSchoolReportSections() {
            document.getElementById('emotion-report-details').classList.remove('active');
            document.getElementById('complaint-report-details').classList.remove('active');
        }

        function showEmotionReport() {
            hideAllSchoolReportSections(); // ë‹¤ë¥¸ ë¦¬í¬íŠ¸ ìˆ¨ê¸°ê¸°
            const emotionReportDetails = document.getElementById('emotion-report-details');
            const emotionDataDisplay = document.getElementById('emotion-data');
            emotionReportDetails.classList.add('active');

            let html = '';
            emotionData.forEach(data => {
                html += `<div class="report-item"><strong>ë‚ ì§œ: ${data.date}</strong><br>`;
                html += `<span class="emotion-counts">ì›ƒëŠ” ì–¼êµ´ íšŸìˆ˜: ${data.happy} ğŸ˜Š</span>`;
                html += `<span class="emotion-counts">ìš°ëŠ” ì–¼êµ´ íšŸìˆ˜: ${data.sad} ğŸ˜¢</span></div>`;
            });
            emotionDataDisplay.innerHTML = html;
        }

        function showComplaintReport() {
            hideAllSchoolReportSections(); // ë‹¤ë¥¸ ë¦¬í¬íŠ¸ ìˆ¨ê¸°ê¸°
            const complaintReportDetails = document.getElementById('complaint-report-details');
            complaintReportDetails.classList.add('active');
            // ì°¨íŠ¸ ë‹¤ì‹œ ê·¸ë¦¬ê¸° (ìˆ¨ê²¨ì ¸ ìˆë‹¤ê°€ ë‚˜íƒ€ë‚  ë•Œ í•„ìš”)
            drawComplaintChart();
        }

        // ë¯¼ì› ìœ í˜•ë³„ ëŒ€ì‘ í†µê³„ ì°¨íŠ¸ ê·¸ë¦¬ê¸° í•¨ìˆ˜ (ì „ì—­ìœ¼ë¡œ ì´ë™)
        function drawComplaintChart() {
            const complaintChartCanvas = document.getElementById('complaint-chart');
            const ctx = complaintChartCanvas.getContext('2d');
            const types = Object.keys(complaintTypeData);
            const values = Object.values(complaintTypeData);
            const maxValue = Math.max(...values) + 10; // ì—¬ìœ  ê³µê°„ í™•ë³´
            
            // í•´ìƒë„ì— ë”°ë¥¸ ìº”ë²„ìŠ¤ í¬ê¸° ì¡°ì •
            const dpi = window.devicePixelRatio || 1;
            complaintChartCanvas.width = 380 * dpi; /* ì»¨í…Œì´ë„ˆ ë„ˆë¹„ - íŒ¨ë”© */
            complaintChartCanvas.height = 200 * dpi;
            ctx.scale(dpi, dpi);

            const barWidth = 30;
            const spacing = 15;
            const startX = 40;
            const startY = complaintChartCanvas.height / dpi - 30; // DPI ìŠ¤ì¼€ì¼ë§ ê³ ë ¤
            const chartHeight = complaintChartCanvas.height / dpi - 60;
            const chartWidth = complaintChartCanvas.width / dpi - 60;

            ctx.clearRect(0, 0, complaintChartCanvas.width / dpi, complaintChartCanvas.height / dpi);
            ctx.font = '12px Malgun Gothic';
            ctx.fillStyle = '#333';

            // Yì¶• (ê°’)
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(startX, startY - chartHeight);
            ctx.strokeStyle = '#333';
            ctx.stroke();

            // Yì¶• ëˆˆê¸ˆ ë° ë¼ë²¨
            const numYLabels = 5;
            for (let i = 0; i <= numYLabels; i++) {
                const y = startY - (chartHeight / numYLabels) * i;
                ctx.fillText(Math.round(maxValue / numYLabels * i), startX - 30, y + 5);
            }

            // Xì¶• (ìœ í˜•)
            ctx.beginPath();
            ctx.moveTo(startX, startY);
            ctx.lineTo(startX + chartWidth, startY);
            ctx.stroke();

            // ë§‰ëŒ€ ê·¸ë¦¬ê¸°
            types.forEach((type, index) => {
                const x = startX + (barWidth + spacing) * index + spacing;
                const barHeight = (values[index] / maxValue) * chartHeight;

                ctx.fillStyle = '#4CAF50'; // ë§‰ëŒ€ ìƒ‰ìƒ
                ctx.fillRect(x, startY - barHeight, barWidth, barHeight);

                ctx.fillStyle = '#333';
                ctx.textAlign = 'center';
                ctx.fillText(type, x + barWidth / 2, startY + 20); // ìœ í˜• ë¼ë²¨
                ctx.fillText(values[index], x + barWidth / 2, startY - barHeight - 5); // ê°’
            });
        }
    </script>
</body>
</html>